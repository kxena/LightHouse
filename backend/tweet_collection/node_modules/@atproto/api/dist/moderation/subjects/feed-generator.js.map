{"version":3,"file":"feed-generator.js","sourceRoot":"","sources":["../../../src/moderation/subjects/feed-generator.ts"],"names":[],"mappings":";;AAKA,kDAkBC;AAvBD,0CAAgD;AAEhD,uCAAyC;AACzC,uCAAyC;AAEzC,SAAgB,mBAAmB,CACjC,OAAuC,EACvC,IAAoB;IAEpB,MAAM,GAAG,GAAG,IAAI,6BAAkB,EAAE,CAAA;IAEpC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAA;IAC/B,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,KAAK,IAAI,CAAC,OAAO,CAAC,CAAA;IACjD,IAAI,OAAO,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC;QAC3B,KAAK,MAAM,KAAK,IAAI,OAAO,CAAC,MAAM,EAAE,CAAC;YACnC,GAAG,CAAC,QAAQ,CAAC,SAAS,EAAE,KAAK,EAAE,IAAI,CAAC,CAAA;QACtC,CAAC;IACH,CAAC;IACD,OAAO,6BAAkB,CAAC,KAAK,CAC7B,GAAG,EACH,IAAA,uBAAa,EAAC,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,EACpC,IAAA,uBAAa,EAAC,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,CACrC,CAAA;AACH,CAAC","sourcesContent":["import { ModerationDecision } from '../decision'\nimport { ModerationOpts, ModerationSubjectFeedGenerator } from '../types'\nimport { decideAccount } from './account'\nimport { decideProfile } from './profile'\n\nexport function decideFeedGenerator(\n  subject: ModerationSubjectFeedGenerator,\n  opts: ModerationOpts,\n): ModerationDecision {\n  const acc = new ModerationDecision()\n\n  acc.setDid(subject.creator.did)\n  acc.setIsMe(subject.creator.did === opts.userDid)\n  if (subject.labels?.length) {\n    for (const label of subject.labels) {\n      acc.addLabel('content', label, opts)\n    }\n  }\n  return ModerationDecision.merge(\n    acc,\n    decideAccount(subject.creator, opts),\n    decideProfile(subject.creator, opts),\n  )\n}\n"]}